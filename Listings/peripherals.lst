C51 COMPILER V9.60.7.0   PERIPHERALS                                                       12/22/2025 13:52:50 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE PERIPHERALS
OBJECT MODULE PLACED IN .\Objects\peripherals.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE peripherals.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listin
                    -gs\peripherals.lst) TABS(2) OBJECT(.\Objects\peripherals.obj)

line level    source

   1          /* File: peripherals.c */
   2          #include <aduc841.h>
   3          #include "header.h"
   4          
   5          void Timer3_Init(void) // Configure Timer 3 for 9600 Baud rate
   6          {
   7   1          T3CON &= 0xFE; 
   8   1          T3CON |= 0x86; 
   9   1          T3FD = 0x08;   
  10   1      }
  11          
  12          void UART_Init(void) // Uart ON
  13          {
  14   1          SM0 = 0;
  15   1          SM1 = 1;
  16   1          REN = 1;
  17   1          RI = 0; 
  18   1          TI = 0;
  19   1          ES = 1;
  20   1      }
  21          
  22          void GlobalINT(void) // Global Interrupt enable
  23          {    
  24   1          EA = 1;  
  25   1      }
  26          
  27          void UART_ISR(void) interrupt 4 // ISR
  28          {
  29   1          uint8_t rx_char;
  30   1          uint8_t parsed_val = 0xFF; 
  31   1          uint8_t i;
  32   1      
  33   1          if (RI)
  34   1          {
  35   2              RI = 0;
  36   2              rx_char = SBUF;
  37   2      
  38   2              // Filter Convert ASCII char to hexa
  39   2              if (rx_char >= '0' && rx_char <= '9')      
  40   2              {
  41   3                  parsed_val = rx_char - '0';
  42   3              }
  43   2              else
  44   2                if (rx_char >= 'A' && rx_char <= 'F') 
  45   2              {
  46   3                  parsed_val = rx_char - 'A' + 10;
  47   3              }
  48   2      
  49   2              
  50   2              if (parsed_val != 0xFF)
  51   2              {
  52   3                  Snew = parsed_val; 
  53   3      
  54   3                  if (buffer_count < MAX_PACKETS)
C51 COMPILER V9.60.7.0   PERIPHERALS                                                       12/22/2025 13:52:50 PAGE 2   

  55   3                  {
  56   4                                          
  57   4                      for (i = 0; i < HAMMING_R; i++)
  58   4                      {
  59   5                          S_stream_expanded[(buffer_count * HAMMING_R) + i] = 
  60   5                              (parsed_val >> (HAMMING_R - 1 - i)) & 0x01;// split the number in binary to 4 Byte
             -s in buffer
  61   5                      }
  62   4                      
  63   4                      buffer_count++;
  64   4                      
  65   4                      if (buffer_count == 1) // only one char make interrupt
  66   4                      {
  67   5                          buffer_flag = 1;
  68   5                      }
  69   4                  }
  70   3              }
  71   2          }
  72   1          if (TI) TI = 0; 
  73   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    192    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
